---
title: "Goã§å­¦ã¶ï¼ã‚½ã‚·ãƒ£ã‚²ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆå…¥é–€"
emoji: "ğŸ®"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Go", "ã‚²ãƒ¼ãƒ é–‹ç™º", "è¨­è¨ˆ"]
published: false
---

## ã¯ã˜ã‚ã«

ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ã‚²ãƒ¼ãƒ ï¼ˆä»¥ä¸‹ã€ã‚½ã‚·ãƒ£ã‚²ï¼‰ã«ãŠã„ã¦ã€ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã¯ãƒ¦ãƒ¼ã‚¶ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¶­æŒã™ã‚‹é‡è¦ãªä»•çµ„ã¿ã§ã™ã€‚æœ¬è¨˜äº‹ã§ã¯ã€Goè¨€èªã‚’ç”¨ã„ã¦ã€ã‚·ãƒ³ãƒ—ãƒ«ãªãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’è¨­è¨ˆãƒ»å®Ÿè£…ã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã—ã¾ã™ã€‚

ä»Šå›ã¯ä»¥ä¸‹ã®è¦ä»¶ã‚’æº€ãŸã™æœ€å°æ§‹æˆã®ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

## æœ€å°æ§‹æˆã®ãƒŸãƒƒã‚·ãƒ§ãƒ³

### è¦ä»¶
1. **æ•µã‚’å€’ã—ãŸæ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹**
   - æ•µã‚’å€’ã™ãŸã³ã«APIã‚’å‘¼ã³å‡ºã—ã€å€’ã—ãŸæ•°ã‚’è¨˜éŒ²ã™ã‚‹ã€‚
   - è¨˜éŒ²ã•ã‚ŒãŸæ•°ã«å¿œã˜ã¦ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®é€²æ—ã‚’æ›´æ–°ã™ã‚‹ã€‚
   - é€²æ—ãŒãƒŸãƒƒã‚·ãƒ§ãƒ³ã®åŸºæº–å€¤ï¼ˆthresholdï¼‰ã«é”ã—ãŸã‚‰ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚¯ãƒªã‚¢ã¨ã™ã‚‹ã€‚

2. **å ±é…¬ã®å—ã‘å–ã‚Š**
   - ãƒ¦ãƒ¼ã‚¶æ“ä½œã‚’ãƒˆãƒªã‚¬ãƒ¼ã«å ±é…¬ã‚’å—ã‘å–ã‚‹ã€‚
   - å ±é…¬ã‚’å—ã‘å–ã£ãŸã‚‰ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’ã€Œå—ã‘å–ã‚Šæ¸ˆã¿ã€ã«ã™ã‚‹ã€‚

3. **ãƒ‡ãƒ¼ã‚¿æ§‹é€ **
   - ãƒ¦ãƒ¼ã‚¶ã€ãƒŸãƒƒã‚·ãƒ§ãƒ³ã€ãƒ¦ãƒ¼ã‚¶ã”ã¨ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³é€²æ—ã€å ±é…¬ã®4ã¤ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç®¡ç†ã€‚

4. **ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆ**
   - æœ€å°é™ã®ã‚³ãƒ¼ãƒ‰ã¨ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã§å®Ÿç¾ã€‚

### ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

ä»¥ä¸‹ã¯ã€ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’è¡¨ã™ERå›³ã§ã™ã€‚

```mermaid
erDiagram
    User {
        int id
        string name
    }
    
    Mission {
        int id
        string name
        string description
        int threshold
    }
    
    UserMission {
        int id
        int user_id
        int mission_id
        int progress
        bool is_cleared
        bool is_rewarded
    }
    
    Reward {
        int id
        int mission_id
        string reward_details
    }
    
    User ||--o{ UserMission : "has"
    Mission ||--o{ UserMission : "is assigned to"
    Mission ||--|| Reward : "has"
```

### ã‚·ãƒ¼ã‚±ãƒ³ã‚¹

ä»¥ä¸‹ã¯ã€æ•µã‚’å€’ã—ãŸéš›ã«ãƒ¦ãƒ¼ã‚¶ã”ã¨ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³é€²æ—ã‚’æ›´æ–°ã—ã€å ±é…¬ã‚’å—ã‘å–ã‚‹ã¾ã§ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’ç¤ºã—ã¾ã™ã€‚

```mermaid
sequenceDiagram
    participant User
    participant Server
    participant DB

    User ->> Server: æ•µã‚’å€’ã—ãŸAPIã‚’å‘¼ã³å‡ºã—
    Server ->> DB: å€’ã—ãŸæ•°ã‚’è¨˜éŒ²
    Server ->> DB: ãƒ¦ãƒ¼ã‚¶ã”ã¨ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³é€²æ—ã‚’æ›´æ–°
    DB -->> Server: æ›´æ–°çµæœ
    Server -->> User: æ›´æ–°å®Œäº†é€šçŸ¥

    User ->> Server: å ±é…¬å—ã‘å–ã‚Šãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    Server ->> DB: ãƒ¦ãƒ¼ã‚¶ã”ã¨ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ç¢ºèª
    Server ->> DB: å ±é…¬å—ã‘å–ã‚ŠçŠ¶æ…‹ã‚’æ›´æ–°
    DB -->> Server: æ›´æ–°çµæœ
    Server -->> User: å ±é…¬å—ã‘å–ã‚Šå®Œäº†é€šçŸ¥
```

## å®Ÿè£…

### ãƒ¢ãƒ‡ãƒ«å®šç¾©

ä»¥ä¸‹ã¯ã€Goè¨€èªã§ã®ãƒ¢ãƒ‡ãƒ«å®šç¾©ä¾‹ã§ã™ã€‚

```go
package main

type User struct {
	ID   int
	Name string
}

type Mission struct {
	ID          int
	Name        string
	Description string
	Threshold   int
}

type UserMission struct {
	ID         int
	UserID     int
	MissionID  int
	Progress   int  // 0-100
	IsCleared  bool
	IsRewarded bool
}

type Reward struct {
	ID           int
	MissionID    int
	RewardDetails string
}
```

### æ•µã‚’å€’ã—ãŸéš›ã®å‡¦ç†

```go
func EnemyDefeated(userMissions []UserMission, missions []Mission) {
	for i := range userMissions {
		mission := findMissionByID(missions, userMissions[i].MissionID)
		UpdateUserMissionProgress(&userMissions[i], mission, 10) // ä¾‹: 1ä½“å€’ã™ã”ã¨ã«10%é€²æ—
	}
}

func findMissionByID(missions []Mission, id int) Mission {
	for _, mission := range missions {
		if mission.ID == id {
			return mission
		}
	}
	return Mission{} // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¿”ã™
}
```

### ãƒ¦ãƒ¼ã‚¶ã”ã¨ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³é€²æ—æ›´æ–°å‡¦ç†

```go
func UpdateUserMissionProgress(userMission *UserMission, mission Mission, progressIncrement int) {
	userMission.Progress += progressIncrement
	if userMission.Progress >= mission.Threshold {
		userMission.Progress = mission.Threshold
		userMission.IsCleared = true
	}
}
```

### å ±é…¬å—ã‘å–ã‚Šå‡¦ç†

```go
func ClaimReward(userMission *UserMission, reward Reward) {
	if userMission.IsCleared && !userMission.IsRewarded {
		// å ±é…¬ã‚’ãƒ¦ãƒ¼ã‚¶ã«ä»˜ä¸ã™ã‚‹å‡¦ç†
		println("Reward granted:", reward.RewardDetails)
		userMission.IsRewarded = true
	} else {
		println("Reward cannot be claimed.")
	}
}
```

## ãŠã‚ã‚Šã«

æœ¬è¨˜äº‹ã§ã¯ã€Goè¨€èªã‚’ç”¨ã„ã¦ã‚·ãƒ³ãƒ—ãƒ«ãªãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’è¨­è¨ˆãƒ»å®Ÿè£…ã—ã¾ã—ãŸã€‚ãƒ¦ãƒ¼ã‚¶ã”ã¨ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³é€²æ—ã‚’ç®¡ç†ã™ã‚‹ä»•çµ„ã¿ã‚’å°å…¥ã—ã€ãƒŸãƒƒã‚·ãƒ§ãƒ³ã”ã¨ã«åŸºæº–å€¤ï¼ˆthresholdï¼‰ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€æŸ”è»Ÿãªè¨­è¨ˆã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚æ¬¡å›ã¯ã€è¤‡é›‘ãªæ¡ä»¶ã‚’æŒã¤ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚„ã€è¤‡æ•°ç¨®é¡ã®å ±é…¬ã‚’æ‰±ã†æ‹¡å¼µä¾‹ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚
